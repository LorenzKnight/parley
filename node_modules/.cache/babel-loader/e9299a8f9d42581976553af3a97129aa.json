{"remainingRequest":"/Users/lorenz/Documents/code/parley/node_modules/babel-loader/lib/index.js!/Users/lorenz/Documents/code/parley/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lorenz/Documents/code/parley/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lorenz/node_modules/v-calendar-scheduler/components/views/Week.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lorenz/node_modules/v-calendar-scheduler/components/views/Week.vue","mtime":1529439522000},{"path":"/Users/lorenz/Documents/code/parley/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lorenz/Documents/code/parley/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lorenz/Documents/code/parley/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lorenz/Documents/code/parley/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.sort\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport moment from 'moment';\nimport { EventBus } from \"../EventBus\";\nimport EventItem from \"../EventItem\";\nimport IsView from \"../mixins/IsView\";\nimport ShowsTimes from \"../mixins/ShowsTimes\";\nexport default {\n  name: \"week\",\n  mixins: [IsView, ShowsTimes],\n  components: {\n    EventItem: EventItem\n  },\n  data: function data() {\n    return {\n      days: [] // newEvents: JSON.parse(JSON.stringify(this.events))\n\n    };\n  },\n  mounted: function mounted() {\n    this.buildCalendar();\n  },\n  methods: {\n    timeClicked: function timeClicked(data) {\n      EventBus.$emit('time-clicked', data);\n    },\n    buildCalendar: function buildCalendar() {\n      var _this = this;\n\n      //  Reset events\n      // this.newEvents = JSON.parse(JSON.stringify(this.events));\n      this.days = [];\n      var now = moment();\n      var temp = moment(this.activeDate).day(moment.localeData().firstDayOfWeek());\n      var w = temp.week();\n      this.days = [];\n\n      var _loop = function _loop() {\n        var day = moment(temp);\n\n        var dayEvents = _this.events.filter(function (e) {\n          return e.date.isSame(day, 'day');\n        }).sort(function (a, b) {\n          if (!a.startTime) return -1;\n          if (!b.startTime) return 1;\n          return moment(a.startTime).format('HH') - moment(b.startTime).format('HH');\n        });\n\n        var mappedEvents = dayEvents.map(function (event) {\n          event.overlaps = dayEvents.filter(function (e) {\n            return moment(event.startTime).isBetween(moment(e.startTime), moment(e.endTime)) && e !== event;\n          }).length;\n          return event;\n        });\n        var newDay = {\n          d: day,\n          isPast: temp.isBefore(now, 'day'),\n          isToday: temp.isSame(now, 'day'),\n          isDisabled: _this.isDayDisabled(temp),\n          availableTimes: _this.times.map(function (time) {\n            return moment(time).dayOfYear(day.dayOfYear());\n          }),\n          events: mappedEvents\n        };\n\n        _this.days.push(newDay);\n\n        temp.add(1, 'day');\n      };\n\n      do {\n        _loop();\n      } while (temp.week() === w);\n    }\n  },\n  watch: {\n    timeRange: function timeRange() {\n      this.buildCalendar();\n    }\n  }\n};",{"version":3,"sources":["Week.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <section class=\"v-cal-content\">\r\n    <div class=\"v-cal-weekdays\">\r\n      <div class=\"v-cal-weekdays__padding\">\r\n        <div class=\"v-cal-times\">\r\n          <!--Fake, hidden time-->\r\n          <div class=\"v-cal-hour\">00:00 <template v-if=\"use12\">PM</template></div>\r\n        </div>\r\n      </div>\r\n      <div class=\"v-cal-weekday__wrapper\">\r\n        <div class=\"v-cal-weekday-item\" v-for=\"day in days\">{{ day.d.format('ddd DD/MM') }}</div>\r\n      </div>\r\n    </div>\r\n    <div class=\"v-cal-days\">\r\n      <div class=\"v-cal-times\">\r\n        <div class=\"v-cal-hour all-day\">{{ allDayLabel }}</div>\r\n        <div class=\"v-cal-hour\" :class=\"{ 'is-now': time.isSame(now, 'hour') }\" v-for=\"time in times\">{{ time | formatTime(use12) }}</div>\r\n      </div>\r\n      <div class=\"v-cal-days__wrapper\">\r\n        <div class=\"v-cal-day v-cal-day--week\" v-for=\"day in days\" :class=\"{ 'is-today': day.isToday, 'is-disabled': day.isDisabled }\">\r\n\r\n          <div class=\"v-cal-day__hour-block all-day\"\r\n               @click=\"timeClicked({ date: day.d.toDate(), time: null })\">\r\n            <span class=\"v-cal-day__hour-block-fill\">00:00 <template v-if=\"use12\">PM</template></span>\r\n            <div class=\"v-cal-day__hour-content\">\r\n              <div class=\"v-cal-event-list\" :class=\"{'tiny-events': day.events.filter(e => !e.startTime).length > 2}\">\r\n\r\n                <event-item\r\n                        v-for=\"event, index in day.events.filter(e => !e.startTime)\"\r\n                        :key=\"index\"\r\n                        :event=\"event\"\r\n                        :has-dynamic-size=\"false\"\r\n                        :use12=\"use12\">\r\n                </event-item>\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"v-cal-day__hour-block\"\r\n               @click=\"timeClicked({ date: day.d.toDate(), time: time.hour() })\"\r\n               :class=\"[ time.hour() === now.hour() ? 'is-now' : '', hourClass ]\" v-for=\"time in day.availableTimes\">\r\n            <span class=\"v-cal-day__hour-block-fill\">{{ time | formatTime(use12) }}</span>\r\n            <div class=\"v-cal-day__hour-content\">\r\n              <div class=\"v-cal-event-list\">\r\n                <event-item\r\n                        v-for=\"event, index in day.events\"\r\n                        :key=\"index\"\r\n                        :event=\"event\"\r\n                        :use12=\"use12\"\r\n                        v-if=\"event.startTime && time.hours() === event.startTime.hours()\">\r\n                </event-item>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\n    import moment from 'moment';\r\n    import { EventBus } from '../EventBus';\r\n    import EventItem from '../EventItem';\r\n    import IsView from '../mixins/IsView';\r\n    import ShowsTimes from '../mixins/ShowsTimes';\r\n\r\n    export default {\r\n        name: \"week\",\r\n        mixins: [ IsView, ShowsTimes ],\r\n        components: { EventItem },\r\n        data() {\r\n            return {\r\n                days: [],\r\n                // newEvents: JSON.parse(JSON.stringify(this.events))\r\n            }\r\n        },\r\n        mounted() {\r\n            this.buildCalendar();\r\n        },\r\n        methods: {\r\n            timeClicked(data) {\r\n                EventBus.$emit('time-clicked', data)\r\n            },\r\n            buildCalendar() {\r\n                //  Reset events\r\n                // this.newEvents = JSON.parse(JSON.stringify(this.events));\r\n\r\n                this.days = [];\r\n\r\n                let now = moment();\r\n\r\n                let temp = moment( this.activeDate ).day(moment.localeData().firstDayOfWeek());\r\n                let w = temp.week();\r\n\r\n                this.days = [];\r\n\r\n                do {\r\n                    const day = moment(temp);\r\n\r\n                    const dayEvents = this.events.filter( e => e.date.isSame(day, 'day') )\r\n                        .sort( (a, b) => {\r\n                            if ( !a.startTime ) return -1;\r\n                            if ( !b.startTime ) return 1;\r\n                            return moment(a.startTime).format('HH') - moment(b.startTime).format('HH');\r\n                        });\r\n                    const mappedEvents = dayEvents.map( event => {\r\n                        event.overlaps = dayEvents.filter( e => moment(event.startTime).isBetween( moment(e.startTime), moment(e.endTime) ) && e !== event ).length;\r\n                        return event;\r\n                    });\r\n\r\n                    let newDay = {\r\n                        d: day,\r\n                        isPast: temp.isBefore( now, 'day' ),\r\n                        isToday: temp.isSame( now, 'day' ),\r\n                        isDisabled: this.isDayDisabled(temp),\r\n                        availableTimes: this.times.map( time => moment(time).dayOfYear( day.dayOfYear() ) ),\r\n                        events: mappedEvents\r\n                    };\r\n                    this.days.push(newDay);\r\n\r\n                    temp.add( 1, 'day' );\r\n                } while ( temp.week() === w );\r\n\r\n            }\r\n        },\r\n        watch: {\r\n            timeRange() {\r\n                this.buildCalendar();\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"sourceRoot":"../../../node_modules/v-calendar-scheduler/components/views"}]}