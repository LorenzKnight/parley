{"remainingRequest":"/Users/lorenz/Documents/code/parley/node_modules/babel-loader/lib/index.js!/Users/lorenz/Documents/code/parley/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lorenz/Documents/code/parley/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lorenz/Documents/code/parley/node_modules/v-calendar-scheduler/components/views/Day.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lorenz/Documents/code/parley/node_modules/v-calendar-scheduler/components/views/Day.vue","mtime":1527292371000},{"path":"/Users/lorenz/Documents/code/parley/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lorenz/Documents/code/parley/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lorenz/Documents/code/parley/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lorenz/Documents/code/parley/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.sort\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport moment from 'moment';\nimport { EventBus } from \"../EventBus\";\nimport EventItem from \"../EventItem\";\nimport IsView from \"../mixins/IsView\";\nimport ShowsTimes from \"../mixins/ShowsTimes\";\nexport default {\n  name: \"day\",\n  mixins: [IsView, ShowsTimes],\n  components: {\n    EventItem: EventItem\n  },\n  data: function data() {\n    return {\n      day: null\n    };\n  },\n  mounted: function mounted() {\n    this.buildCalendar();\n  },\n  methods: {\n    timeClicked: function timeClicked(data) {\n      EventBus.$emit('time-clicked', data);\n    },\n    buildCalendar: function buildCalendar() {\n      var now = moment();\n      var today = moment(this.activeDate);\n      var dayEvents = this.events.filter(function (e) {\n        return moment(e.date).isSame(today, 'day');\n      }).sort(function (a, b) {\n        if (!a.startTime) return -1;\n        if (!b.startTime) return 1;\n        return moment(a.startTime, 'HH:mm').format('HH') - moment(b.startTime, 'HH:mm').format('HH');\n      });\n      var mappedEvents = dayEvents.map(function (event) {\n        event.overlaps = dayEvents.filter(function (e) {\n          return moment(event.startTime, 'HH:mm').isBetween(moment(e.startTime, 'HH:mm'), moment(e.endTime, 'HH:mm')) && e !== event;\n        }).length;\n        return event;\n      });\n      this.day = {\n        d: today,\n        isPast: today.isBefore(now, 'day'),\n        isToday: today.isSame(now, 'day'),\n        availableTimes: this.times,\n        events: mappedEvents\n      };\n    }\n  }\n};",{"version":3,"sources":["Day.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA,OAAA,MAAA,MAAA,QAAA;AACA,SAAA,QAAA;AACA,OAAA,SAAA;AACA,OAAA,MAAA;AACA,OAAA,UAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,KADA;AAEA,EAAA,MAAA,EAAA,CAAA,MAAA,EAAA,UAAA,CAFA;AAGA,EAAA,UAAA,EAAA;AAAA,IAAA,SAAA,EAAA;AAAA,GAHA;AAIA,EAAA,IAJA,kBAIA;AACA,WAAA;AACA,MAAA,GAAA,EAAA;AADA,KAAA;AAGA,GARA;AASA,EAAA,OATA,qBASA;AACA,SAAA,aAAA;AACA,GAXA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,uBACA,IADA,EACA;AACA,MAAA,QAAA,CAAA,KAAA,CAAA,cAAA,EAAA,IAAA;AACA,KAHA;AAIA,IAAA,aAJA,2BAIA;AACA,UAAA,GAAA,GAAA,MAAA,EAAA;AAEA,UAAA,KAAA,GAAA,MAAA,CAAA,KAAA,UAAA,CAAA;AAEA,UAAA,SAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,UAAA,CAAA;AAAA,eAAA,MAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,MAAA,CAAA,KAAA,EAAA,KAAA,CAAA;AAAA,OAAA,EACA,IADA,CACA,UAAA,CAAA,EAAA,CAAA,EAAA;AACA,YAAA,CAAA,CAAA,CAAA,SAAA,EAAA,OAAA,CAAA,CAAA;AACA,YAAA,CAAA,CAAA,CAAA,SAAA,EAAA,OAAA,CAAA;AACA,eAAA,MAAA,CAAA,CAAA,CAAA,SAAA,EAAA,OAAA,CAAA,CAAA,MAAA,CAAA,IAAA,IAAA,MAAA,CAAA,CAAA,CAAA,SAAA,EAAA,OAAA,CAAA,CAAA,MAAA,CAAA,IAAA,CAAA;AACA,OALA,CAAA;AAMA,UAAA,YAAA,GAAA,SAAA,CAAA,GAAA,CAAA,UAAA,KAAA,EAAA;AACA,QAAA,KAAA,CAAA,QAAA,GAAA,SAAA,CAAA,MAAA,CAAA,UAAA,CAAA;AAAA,iBAAA,MAAA,CAAA,KAAA,CAAA,SAAA,EAAA,OAAA,CAAA,CAAA,SAAA,CAAA,MAAA,CAAA,CAAA,CAAA,SAAA,EAAA,OAAA,CAAA,EAAA,MAAA,CAAA,CAAA,CAAA,OAAA,EAAA,OAAA,CAAA,KAAA,CAAA,KAAA,KAAA;AAAA,SAAA,EAAA,MAAA;AACA,eAAA,KAAA;AACA,OAHA,CAAA;AAKA,WAAA,GAAA,GAAA;AACA,QAAA,CAAA,EAAA,KADA;AAEA,QAAA,MAAA,EAAA,KAAA,CAAA,QAAA,CAAA,GAAA,EAAA,KAAA,CAFA;AAGA,QAAA,OAAA,EAAA,KAAA,CAAA,MAAA,CAAA,GAAA,EAAA,KAAA,CAHA;AAIA,QAAA,cAAA,EAAA,KAAA,KAJA;AAKA,QAAA,MAAA,EAAA;AALA,OAAA;AAOA;AA3BA;AAZA,CAAA","sourcesContent":["<template>\r\n    <section class=\"v-cal-content\">\r\n        <div class=\"v-cal-weekdays\">\r\n            <div class=\"v-cal-weekday-item\">{{ activeDate.format('ddd DD/MM') }}</div>\r\n        </div>\r\n        <div class=\"v-cal-days\">\r\n            <div class=\"v-cal-times\">\r\n                <div class=\"v-cal-hour\">{{ allDayLabel }}</div>\r\n                <div class=\"v-cal-hour\" :class=\"{ 'is-now': time.isSame(now, 'hour') }\" v-for=\"time in times\">{{ time | formatTime(use12) }}</div>\r\n            </div>\r\n            <div class=\"v-cal-days__wrapper\">\r\n                <div class=\"v-cal-day v-cal-day--day\" :class=\"{ 'is-today': day.isToday }\" v-if=\"day !== null\">\r\n                    <div class=\"v-cal-day__hour-block\"\r\n                         @click=\"timeClicked({ date: day.d.toDate(), time: null })\">\r\n                        <span class=\"v-cal-day__hour-block-fill\">00:00 <template v-if=\"use12\">PM</template></span>\r\n                        <div class=\"v-cal-day__hour-content\">\r\n                            <div class=\"v-cal-event-list\" :class=\"{'tiny-events': day.events.filter(e => !e.startTime).length > 2}\">\r\n                                <event-item\r\n                                        v-for=\"event,index in day.events.filter(e => !e.startTime)\"\r\n                                        :key=\"index\"\r\n                                        :event=\"event\"\r\n                                        :use12=\"use12\"\r\n                                        @click.stop=\"eventBus.$emit('event-clicked', event)\">\r\n                                </event-item>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"v-cal-day__hour-block\"\r\n                         @click=\"timeClicked({ date: day.d.toDate(), time: time.hour() })\"\r\n                         :class=\"[ time.isSame(now, 'hour') ? 'is-now' : '', hourClass ]\" v-for=\"time in day.availableTimes\">\r\n                        <span class=\"v-cal-day__hour-block-fill\">{{ time | formatTime(use12) }}</span>\r\n                        <div class=\"v-cal-day__hour-content\">\r\n                            <div class=\"v-cal-event-list\">\r\n                                <event-item\r\n                                        v-for=\"event, index in day.events\"\r\n                                        v-if=\"event.startTime && time.hours() === event.startTime.hours()\"\r\n                                        :key=\"index\"\r\n                                        :event=\"event\"\r\n                                        :use12=\"use12\">\r\n                                </event-item>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</template>\r\n\r\n<script>\r\n    import moment from 'moment';\r\n    import { EventBus } from '../EventBus';\r\n    import EventItem from '../EventItem';\r\n    import IsView from '../mixins/IsView';\r\n    import ShowsTimes from '../mixins/ShowsTimes';\r\n\r\n    export default {\r\n        name: \"day\",\r\n        mixins: [ IsView, ShowsTimes ],\r\n        components: { EventItem },\r\n        data() {\r\n            return {\r\n                day: null\r\n            }\r\n        },\r\n        mounted() {\r\n            this.buildCalendar();\r\n        },\r\n        methods: {\r\n            timeClicked(data) {\r\n                EventBus.$emit('time-clicked', data)\r\n            },\r\n            buildCalendar() {\r\n                let now = moment();\r\n\r\n                const today = moment( this.activeDate );\r\n\r\n                const dayEvents = this.events.filter( e => moment(e.date).isSame(today, 'day') )\r\n                    .sort( (a, b) => {\r\n                        if ( !a.startTime ) return -1;\r\n                        if ( !b.startTime ) return 1;\r\n                        return moment(a.startTime, 'HH:mm').format('HH') - moment(b.startTime, 'HH:mm').format('HH');\r\n                    });\r\n                const mappedEvents = dayEvents.map( event => {\r\n                    event.overlaps = dayEvents.filter( e => moment(event.startTime, 'HH:mm').isBetween( moment(e.startTime, 'HH:mm'), moment(e.endTime, 'HH:mm') ) && e !== event ).length;\r\n                    return event;\r\n                });\r\n\r\n                this.day = {\r\n                    d: today,\r\n                    isPast: today.isBefore( now, 'day' ),\r\n                    isToday: today.isSame( now, 'day' ),\r\n                    availableTimes: this.times,\r\n                    events: mappedEvents\r\n                };\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"sourceRoot":"node_modules/v-calendar-scheduler/components/views"}]}