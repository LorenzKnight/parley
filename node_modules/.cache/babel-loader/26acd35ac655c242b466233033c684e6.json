{"remainingRequest":"/Users/lorenz/Documents/code/parley/node_modules/babel-loader/lib/index.js!/Users/lorenz/Documents/code/parley/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lorenz/Documents/code/parley/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lorenz/Documents/code/parley/node_modules/v-calendar-scheduler/components/EventItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lorenz/Documents/code/parley/node_modules/v-calendar-scheduler/components/EventItem.vue","mtime":1527292371000},{"path":"/Users/lorenz/Documents/code/parley/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lorenz/Documents/code/parley/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lorenz/Documents/code/parley/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lorenz/Documents/code/parley/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport moment from 'moment';\nimport { EventBus } from \"./EventBus\";\nexport default {\n  name: \"EventItem\",\n  props: {\n    event: {\n      type: Object,\n      required: true\n    },\n    use12: {\n      type: Boolean,\n      required: true\n    },\n    hasDynamicSize: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data: function data() {\n    return {\n      ancestorHeight: 0\n    };\n  },\n  mounted: function mounted() {\n    if (this.hasDynamicSize) {\n      this.getAndSetAncestorHeight();\n      window.addEventListener('resize', this.getAndSetAncestorHeight);\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    if (this.hasDynamicSize) window.removeEventListener('resize', this.getAndSetAncestorHeight);\n  },\n  methods: {\n    eventClicked: function eventClicked() {\n      EventBus.$emit('event-clicked', this.event);\n    },\n    getAndSetAncestorHeight: function getAndSetAncestorHeight() {\n      this.ancestorHeight = this.findAncestor(this.$refs.event_block, 'v-cal-day__hour-content').offsetHeight;\n    },\n    findAncestor: function findAncestor(el, cls) {\n      while ((el = el.parentElement) && !el.classList.contains(cls)) {\n        ;\n      }\n\n      return el;\n    }\n  },\n  computed: {\n    displayHeight: function displayHeight() {\n      var end = this.event.endTime.hours() > 0 ? moment(this.event.endTime) : moment(this.event.endTime).add(1, 'days');\n      var hours = end.diff(this.event.startTime, 'hours', true);\n      var bordersOffset = hours - 1;\n      return hours * this.ancestorHeight + bordersOffset;\n    },\n    eventStyles: function eventStyles() {\n      var styles = [];\n      styles.push({\n        'backgroundColor': this.event.color,\n        'color': this.event.color\n      });\n\n      if (this.hasDynamicSize) {\n        styles.push({\n          'height': this.displayHeight + 'px'\n        });\n\n        if (this.event.overlaps > 0) {\n          var width = 100 / (this.event.overlaps + 1);\n          styles.push({\n            'width': width + '%',\n            'left': width + '%'\n          });\n        }\n\n        if (this.event.startTime.minutes() > 0) {\n          var distance = this.ancestorHeight / 60 * this.event.startTime.minutes();\n          styles.push({\n            'top': distance + 'px'\n          });\n        }\n      }\n\n      return styles;\n    },\n    eventClasses: function eventClasses() {\n      return {\n        'is-overlapping': this.event.overlaps > 0\n      };\n    }\n  },\n  filters: {\n    formatEventTime: function formatEventTime(hour) {\n      var use12 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!hour) return '';\n      if (use12) return hour.format(hour.minutes() > 0 ? 'h.mma' : 'ha').slice(0, -1);\n      return hour.format(hour.minutes() > 0 ? 'HH.mm' : 'HH');\n    }\n  }\n};",{"version":3,"sources":["EventItem.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div ref=\"event_block\" class=\"v-cal-event-item\"\r\n         :title=\"event.startTime | formatEventTime(use12) + ' - ' + event.displayText\"\r\n         :class=\"eventClasses\"\r\n         @click.stop=\"eventClicked\"\r\n         :style=\"eventStyles\">\r\n        <span class=\"v-cal-event-time\">{{ event.startTime | formatEventTime(use12) }}</span>\r\n        <span class=\"v-cal-event-name\">{{ event.displayText }}</span>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import moment from 'moment';\r\n    import { EventBus } from './EventBus';\r\n\r\n    export default {\r\n        name: \"EventItem\",\r\n        props: {\r\n            event: {\r\n                type: Object,\r\n                required: true\r\n            },\r\n            use12: {\r\n                type: Boolean,\r\n                required: true\r\n            },\r\n            hasDynamicSize: {\r\n                type: Boolean,\r\n                default: true\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                ancestorHeight: 0\r\n            }\r\n        },\r\n        mounted() {\r\n            if ( this.hasDynamicSize ) {\r\n                this.getAndSetAncestorHeight();\r\n                window.addEventListener('resize', this.getAndSetAncestorHeight);\r\n            }\r\n        },\r\n        beforeDestroy() {\r\n            if ( this.hasDynamicSize )\r\n                window.removeEventListener('resize', this.getAndSetAncestorHeight);\r\n        },\r\n        methods: {\r\n            eventClicked() {\r\n                EventBus.$emit('event-clicked', this.event);\r\n            },\r\n            getAndSetAncestorHeight() {\r\n                this.ancestorHeight = this.findAncestor(this.$refs.event_block, 'v-cal-day__hour-content').offsetHeight;\r\n            },\r\n            findAncestor (el, cls) {\r\n                while ((el = el.parentElement) && !el.classList.contains(cls)) ;\r\n                return el;\r\n            }\r\n        },\r\n        computed: {\r\n            displayHeight() {\r\n\r\n                const end = this.event.endTime.hours() > 0 ? moment(this.event.endTime) : moment(this.event.endTime).add(1, 'days');\r\n\r\n                const hours = end.diff(this.event.startTime, 'hours', true);\r\n                const bordersOffset = hours - 1;\r\n                return  ( hours * this.ancestorHeight ) + bordersOffset;\r\n            },\r\n            eventStyles() {\r\n\r\n                let styles = [];\r\n                styles.push({\r\n                    'backgroundColor': this.event.color,\r\n                    'color': this.event.color,\r\n                });\r\n\r\n                if ( this.hasDynamicSize ) {\r\n                    styles.push({\r\n                        'height': this.displayHeight + 'px',\r\n                    });\r\n\r\n                    if ( this.event.overlaps > 0 ) {\r\n                        const width = 100 / ( this.event.overlaps + 1 );\r\n                        styles.push({\r\n                            'width': width + '%',\r\n                            'left': width + '%'\r\n                        });\r\n                    }\r\n\r\n                    if ( this.event.startTime.minutes() > 0 ) {\r\n                        const distance = ( this.ancestorHeight / 60 ) * this.event.startTime.minutes();\r\n                        styles.push({\r\n                            'top': distance + 'px'\r\n                        });\r\n                    }\r\n                }\r\n\r\n                return styles;\r\n            },\r\n            eventClasses() {\r\n                return {\r\n                    'is-overlapping': this.event.overlaps > 0\r\n                }\r\n            }\r\n        },\r\n        filters: {\r\n            formatEventTime(hour, use12 = false) {\r\n                if ( !hour )\r\n                    return '';\r\n\r\n                if ( use12 )\r\n                    return hour.format( hour.minutes() > 0 ? 'h.mma' : 'ha' ).slice(0, -1);\r\n\r\n                return hour.format( hour.minutes() > 0 ? 'HH.mm' : 'HH' );\r\n            }\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"sourceRoot":"node_modules/v-calendar-scheduler/components"}]}